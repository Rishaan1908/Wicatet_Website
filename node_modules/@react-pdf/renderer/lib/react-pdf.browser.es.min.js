import e from"@babel/runtime/helpers/extends";import*as n from"@react-pdf/primitives";export*from"@react-pdf/primitives";import r from"queue";import t,{useRef as o,useState as i,useEffect as u}from"react";import c from"@babel/runtime/helpers/asyncToGenerator";import a from"@babel/runtime/regenerator";import l from"blob-stream";import f from"@react-pdf/font";import s from"@react-pdf/render";import d from"@react-pdf/pdfkit";import p from"@react-pdf/layout";import m from"@babel/runtime/helpers/objectWithoutPropertiesLoose";import h from"react-reconciler";import{unstable_scheduleCallback as v,unstable_cancelCallback as b}from"scheduler";var y,g=function e(n,r){var t=Object.keys(n),o=Object.keys(r);if(t.length!==o.length)return!1;for(var i=0;i<t.length;i+=1){var u=t[i];if("render"===u&&!n[u]!=!r[u])return!1;if("children"!==u&&n[u]!==r[u]){if("object"==typeof n[u]&&"object"==typeof r[u]&&e(n[u],r[u]))continue;return!1}if("children"===u&&("string"==typeof n[u]||"string"==typeof r[u]))return n[u]===r[u]}return!0},w=["style","children"],C=["style"],x={},T=function(e){var n=e.onChange;return h({schedulePassiveEffects:v,cancelPassiveEffects:b,supportsMutation:!0,isPrimaryRenderer:!1,warnsIfNotActing:!1,appendInitialChild:function(e,n){e.children.push(n)},createInstance:function(e,n){var r=n.style;return n.children,{type:e,box:{},style:r||{},props:m(n,w)||{},children:[]}},createTextInstance:function(e,n){return{type:"TEXT_INSTANCE",value:e}},finalizeInitialChildren:function(e,n,r){return!1},getPublicInstance:function(e){return e},prepareForCommit:function(){},clearContainer:function(){},prepareUpdate:function(e,n,r,t){return!g(r,t)},resetAfterCommit:void 0===n?function(){}:n,resetTextContent:function(e){},getRootHostContext:function(){return x},getChildHostContext:function(){return x},shouldSetTextContent:function(e,n){return!1},now:Date.now,useSyncScheduling:!0,appendChild:function(e,n){e.children.push(n)},appendChildToContainer:function(e,n){"ROOT"===e.type?e.document=n:e.children.push(n)},insertBefore:function(e,n,r){var t,o=null===(t=e.children)||void 0===t?void 0:t.indexOf(r);void 0!==o&&-1!==o&&n&&e.children.splice(o,0,n)},removeChild:function(e,n){var r,t=null===(r=e.children)||void 0===r?void 0:r.indexOf(n);void 0!==t&&-1!==t&&e.children.splice(t,1)},removeChildFromContainer:function(e,n){var r,t=null===(r=e.children)||void 0===r?void 0:r.indexOf(n);void 0!==t&&-1!==t&&e.children.splice(t,1)},commitTextUpdate:function(e,n,r){e.value=r},commitUpdate:function(e,n,r,t,o){var i=o.style,u=m(o,C);e.props=u,e.style=i}})},P="2.2.0",S=new f,O={},R=function(e){var n={type:"ROOT",document:null},r=(y=y||T({onChange:function(){for(var e,n=(null===(e=O.change)||void 0===e?void 0:e.slice())||[],r=0;r<n.length;r+=1)n[r]()}})).createContainer(n),t=function(e){y.updateContainer(e,r,null)};e&&t(e);var o=function(){var e=c(a.mark((function e(r){var t,o,i,u,c,l,f;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!0),t=n.document.props||{},o=t.pdfVersion,i=t.language,u=t.pageLayout,c=t.pageMode,l=new d({compress:r,pdfVersion:o,lang:i,displayTitle:!0,autoFirstPage:!1,pageLayout:u,pageMode:c}),e.next=6,p(n.document,S);case 6:return f=e.sent,e.abrupt("return",s(l,f));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),i=function(e){void 0===e&&(e={}),n.document.props.onRender&&n.document.props.onRender(e)},u=function(){var e=c(a.mark((function e(){var n,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return n=e.sent,r=n.pipe(l()),e.abrupt("return",new Promise((function(e,n){r.on("finish",(function(){try{var t=r.toBlob("application/pdf");i({blob:t}),e(t)}catch(e){n(e)}})),r.on("error",n)})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=c(a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(),e.abrupt("return",o());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=c(a.mark((function e(){var n,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,o(!1);case 3:return r=e.sent,e.abrupt("return",new Promise((function(e,t){try{r.on("data",(function(e){n+=e})),r.on("end",(function(){i(),e(n)}))}catch(e){t(e)}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{on:function(e,n){O[e]||(O[e]=[]),O[e].push(n)},container:n,toBlob:u,toBuffer:f,toString:m,removeListener:function(e,n){if(O[e]){var r=O[e].indexOf(n);r>-1&&O[e].splice(r,1)}},updateContainer:t}},k=S,L={create:function(e){return e}},F=function(n){var t=n.document,c=o(null),a=i({url:null,blob:null,error:null,loading:!1}),l=a[0],f=a[1];u((function(){var n=r({autostart:!0,concurrency:1}),o=function(){f((function(n){return e({},n,{loading:!0})})),n.splice(0,n.length,(function(){return l.error?Promise.resolve():c.current.toBlob()}))};return c.current=R(),c.current.on("change",o),c.current.updateContainer(t),n.on("error",(function(n){console.error(n),f((function(r){return e({},r,{error:n})}))})),n.on("success",(function(e){f({blob:e,error:null,loading:!1,url:URL.createObjectURL(e)})})),function(){n.end(),c.current.removeListener("change",o)}}),[]),u((function(){return function(){l.url&&URL.revokeObjectURL(l.url)}}),[l.url]);return[l,function(){c.current.updateContainer(t)}]},N=["title","style","className","children","innerRef","showToolbar"],B=function(n){var r=n.title,o=n.style,i=n.className,c=n.children,a=n.innerRef,l=n.showToolbar,f=void 0===l||l,s=m(n,N),d=F({document:c}),p=d[0],h=d[1];u(h,[c]);var v=p.url?p.url+"#toolbar="+(f?1:0):null;return t.createElement("iframe",e({src:v,title:r,ref:a,style:o,className:i},s))},I=function(e){var n=e.document,r=e.children,t=F({document:n}),o=t[0],i=t[1];return u(i,[n]),n?r(o):(console.warn("You should pass a valid document to BlobProvider"),null)},j=function(e){var n=e.style,r=e.children,o=e.className,i=e.document,c=e.fileName,a=void 0===c?"document.pdf":c,l=F({document:i}),f=l[0],s=l[1];if(u(s,[r]),!i)return console.warn("You should pass a valid document to PDFDownloadLink"),null;return t.createElement("a",{style:n,href:f.url,download:a,className:o,onClick:function(){window.navigator.msSaveBlob&&window.navigator.msSaveBlob(f.blob,a)}},"function"==typeof r?r(f):r)},D=function(e){throw new Error(e+" is a Node specific API. You're either using this method in a browser, or your bundler is not loading react-pdf from the appropriate web build.")},E=function(){D("renderToStream")},U=function(){D("renderToString")},A=function(){D("renderToFile")},M=function(){D("render")},V=e({pdf:R,usePDF:F,Font:k,version:"2.2.0",StyleSheet:L,PDFViewer:B,BlobProvider:I,PDFDownloadLink:j,renderToStream:E,renderToString:U,renderToFile:A,render:M},n);export{I as BlobProvider,k as Font,j as PDFDownloadLink,B as PDFViewer,L as StyleSheet,T as createRenderer,V as default,R as pdf,M as render,A as renderToFile,E as renderToStream,U as renderToString,F as usePDF,P as version};
//# sourceMappingURL=react-pdf.browser.es.min.js.map
