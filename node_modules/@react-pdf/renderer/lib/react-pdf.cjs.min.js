"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@react-pdf/primitives"),t=require("fs"),r=require("blob-stream"),n=require("@react-pdf/font"),o=require("@react-pdf/render"),i=require("@react-pdf/pdfkit"),a=require("@react-pdf/layout"),s=require("react-reconciler"),c=require("scheduler");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var u=l(e),p=d(t),f=d(r),h=d(n),y=d(o),b=d(i),v=d(a),g=d(s);const m=(e,t)=>{const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let n=0;n<r.length;n+=1){const o=r[n];if("render"===o&&!e[o]!=!t[o])return!1;if("children"!==o&&e[o]!==t[o]){if("object"==typeof e[o]&&"object"==typeof t[o]&&m(e[o],t[o]))continue;return!1}if("children"===o&&("string"==typeof e[o]||"string"==typeof t[o]))return e[o]===t[o]}return!0},x={},P=({onChange:e=(()=>{})})=>g.default({schedulePassiveEffects:c.unstable_scheduleCallback,cancelPassiveEffects:c.unstable_cancelCallback,supportsMutation:!0,isPrimaryRenderer:!1,warnsIfNotActing:!1,appendInitialChild(e,t){e.children.push(t)},createInstance:(e,{style:t,children:r,...n})=>({type:e,box:{},style:t||{},props:n||{},children:[]}),createTextInstance:(e,t)=>({type:"TEXT_INSTANCE",value:e}),finalizeInitialChildren:(e,t,r)=>!1,getPublicInstance:e=>e,prepareForCommit(){},clearContainer(){},prepareUpdate:(e,t,r,n)=>!m(r,n),resetAfterCommit:e,resetTextContent(e){},getRootHostContext:()=>x,getChildHostContext:()=>x,shouldSetTextContent:(e,t)=>!1,now:Date.now,useSyncScheduling:!0,appendChild(e,t){e.children.push(t)},appendChildToContainer(e,t){"ROOT"===e.type?e.document=t:e.children.push(t)},insertBefore(e,t,r){var n;const o=null===(n=e.children)||void 0===n?void 0:n.indexOf(r);void 0!==o&&-1!==o&&t&&e.children.splice(o,0,t)},removeChild(e,t){var r;const n=null===(r=e.children)||void 0===r?void 0:r.indexOf(t);void 0!==n&&-1!==n&&e.children.splice(n,1)},removeChildFromContainer(e,t){var r;const n=null===(r=e.children)||void 0===r?void 0:r.indexOf(t);void 0!==n&&-1!==n&&e.children.splice(n,1)},commitTextUpdate(e,t,r){e.value=r},commitUpdate(e,t,r,n,o){const{style:i,...a}=o;e.props=a,e.style=i}});const w=new h.default;let C;const O={},T=e=>{const t={type:"ROOT",document:null};C=C||P({onChange:()=>{var e;const t=(null===(e=O.change)||void 0===e?void 0:e.slice())||[];for(let e=0;e<t.length;e+=1)t[e]()}});const r=C.createContainer(t),n=e=>{C.updateContainer(e,r,null)};e&&n(e);const o=async(e=!0)=>{const r=t.document.props||{},{pdfVersion:n,language:o,pageLayout:i,pageMode:a}=r,s=new b.default({compress:e,pdfVersion:n,lang:o,displayTitle:!0,autoFirstPage:!1,pageLayout:i,pageMode:a}),c=await v.default(t.document,w);return y.default(s,c)},i=(e={})=>{t.document.props.onRender&&t.document.props.onRender(e)};return{on:(e,t)=>{O[e]||(O[e]=[]),O[e].push(t)},container:t,toBlob:async()=>{const e=(await o()).pipe(f.default());return new Promise(((t,r)=>{e.on("finish",(()=>{try{const r=e.toBlob("application/pdf");i({blob:r}),t(r)}catch(e){r(e)}})),e.on("error",r)}))},toBuffer:async()=>(i(),o()),toString:async()=>{let e="";const t=await o(!1);return new Promise(((r,n)=>{try{t.on("data",(t=>{e+=t})),t.on("end",(()=>{i(),r(e)}))}catch(e){n(e)}}))},removeListener:(e,t)=>{if(!O[e])return;const r=O[e].indexOf(t);r>-1&&O[e].splice(r,1)},updateContainer:n}},F=w,S={create:e=>e},D=async(e,t,r)=>{const n=T(e),o=await n.toBuffer(),i=p.default.createWriteStream(t);return o.pipe(i),new Promise(((e,n)=>{i.on("finish",(()=>{r&&r(o,t),e(o)})),i.on("error",n)}))},j=async e=>{const t=T(e);return await t.toBuffer()},k=e=>T(e).toString(),q=e=>{throw new Error(`${e} is a web specific API. You're either using this component on Node, or your bundler is not loading react-pdf from the appropriate web build.`)},B=()=>{q("usePDF")},I=()=>{q("PDFViewer")},E=()=>{q("PDFDownloadLink")},R=()=>{q("BlobProvider")},_=D;var L={pdf:T,Font:F,version:"2.2.0",StyleSheet:S,usePDF:B,PDFViewer:I,BlobProvider:R,PDFDownloadLink:E,renderToStream:j,renderToString:k,renderToFile:D,render:_,...u};exports.BlobProvider=R,exports.Font=F,exports.PDFDownloadLink=E,exports.PDFViewer=I,exports.StyleSheet=S,exports.createRenderer=P,exports.default=L,exports.pdf=T,exports.render=_,exports.renderToFile=D,exports.renderToStream=j,exports.renderToString=k,exports.usePDF=B,exports.version="2.2.0",Object.keys(e).forEach((function(t){"default"===t||exports.hasOwnProperty(t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}})}));
//# sourceMappingURL=react-pdf.cjs.min.js.map
