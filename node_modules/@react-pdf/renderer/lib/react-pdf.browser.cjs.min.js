"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/extends"),r=require("@react-pdf/primitives"),n=require("queue"),t=require("react"),o=require("@babel/runtime/helpers/asyncToGenerator"),u=require("@babel/runtime/regenerator"),i=require("blob-stream"),a=require("@react-pdf/font"),c=require("@react-pdf/render"),l=require("@react-pdf/pdfkit"),f=require("@react-pdf/layout"),d=require("@babel/runtime/helpers/objectWithoutPropertiesLoose"),s=require("react-reconciler"),p=require("scheduler");function h(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var t=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,t.get?t:{enumerable:!0,get:function(){return e[n]}})}})),r.default=e,Object.freeze(r)}var b,m=h(e),y=v(r),g=h(n),x=h(t),w=h(o),C=h(u),P=h(i),T=h(a),O=h(c),S=h(l),j=h(f),k=h(d),q=h(s),F=function e(r,n){var t=Object.keys(r),o=Object.keys(n);if(t.length!==o.length)return!1;for(var u=0;u<t.length;u+=1){var i=t[u];if("render"===i&&!r[i]!=!n[i])return!1;if("children"!==i&&r[i]!==n[i]){if("object"==typeof r[i]&&"object"==typeof n[i]&&e(r[i],n[i]))continue;return!1}if("children"===i&&("string"==typeof r[i]||"string"==typeof n[i]))return r[i]===n[i]}return!0},E=["style","children"],R=["style"],D={},L=function(e){var r=e.onChange,n=void 0===r?function(){}:r;return q.default({schedulePassiveEffects:p.unstable_scheduleCallback,cancelPassiveEffects:p.unstable_cancelCallback,supportsMutation:!0,isPrimaryRenderer:!1,warnsIfNotActing:!1,appendInitialChild:function(e,r){e.children.push(r)},createInstance:function(e,r){var n=r.style;return r.children,{type:e,box:{},style:n||{},props:k.default(r,E)||{},children:[]}},createTextInstance:function(e,r){return{type:"TEXT_INSTANCE",value:e}},finalizeInitialChildren:function(e,r,n){return!1},getPublicInstance:function(e){return e},prepareForCommit:function(){},clearContainer:function(){},prepareUpdate:function(e,r,n,t){return!F(n,t)},resetAfterCommit:n,resetTextContent:function(e){},getRootHostContext:function(){return D},getChildHostContext:function(){return D},shouldSetTextContent:function(e,r){return!1},now:Date.now,useSyncScheduling:!0,appendChild:function(e,r){e.children.push(r)},appendChildToContainer:function(e,r){"ROOT"===e.type?e.document=r:e.children.push(r)},insertBefore:function(e,r,n){var t,o=null===(t=e.children)||void 0===t?void 0:t.indexOf(n);void 0!==o&&-1!==o&&r&&e.children.splice(o,0,r)},removeChild:function(e,r){var n,t=null===(n=e.children)||void 0===n?void 0:n.indexOf(r);void 0!==t&&-1!==t&&e.children.splice(t,1)},removeChildFromContainer:function(e,r){var n,t=null===(n=e.children)||void 0===n?void 0:n.indexOf(r);void 0!==t&&-1!==t&&e.children.splice(t,1)},commitTextUpdate:function(e,r,n){e.value=n},commitUpdate:function(e,r,n,t,o){var u=o.style,i=k.default(o,R);e.props=i,e.style=u}})},B=new T.default,N={},I=function(e){var r={type:"ROOT",document:null},n=(b=b||L({onChange:function(){for(var e,r=(null===(e=N.change)||void 0===e?void 0:e.slice())||[],n=0;n<r.length;n+=1)r[n]()}})).createContainer(r),t=function(e){b.updateContainer(e,n,null)};e&&t(e);var o=function(){var e=w.default(C.default.mark((function e(n){var t,o,u,i,a,c,l;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=!0),t=r.document.props||{},o=t.pdfVersion,u=t.language,i=t.pageLayout,a=t.pageMode,c=new S.default({compress:n,pdfVersion:o,lang:u,displayTitle:!0,autoFirstPage:!1,pageLayout:i,pageMode:a}),e.next=6,j.default(r.document,B);case 6:return l=e.sent,e.abrupt("return",O.default(c,l));case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),u=function(e){void 0===e&&(e={}),r.document.props.onRender&&r.document.props.onRender(e)},i=function(){var e=w.default(C.default.mark((function e(){var r,n;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return r=e.sent,n=r.pipe(P.default()),e.abrupt("return",new Promise((function(e,r){n.on("finish",(function(){try{var t=n.toBlob("application/pdf");u({blob:t}),e(t)}catch(e){r(e)}})),n.on("error",r)})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=w.default(C.default.mark((function e(){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.abrupt("return",o());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=w.default(C.default.mark((function e(){var r,n;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,o(!1);case 3:return n=e.sent,e.abrupt("return",new Promise((function(e,t){try{n.on("data",(function(e){r+=e})),n.on("end",(function(){u(),e(r)}))}catch(e){t(e)}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{on:function(e,r){N[e]||(N[e]=[]),N[e].push(r)},container:r,toBlob:i,toBuffer:a,toString:c,removeListener:function(e,r){if(N[e]){var n=N[e].indexOf(r);n>-1&&N[e].splice(n,1)}},updateContainer:t}},U=B,_={create:function(e){return e}},M=function(e){var r=e.document,n=t.useRef(null),o=t.useState({url:null,blob:null,error:null,loading:!1}),u=o[0],i=o[1];t.useEffect((function(){var e=g.default({autostart:!0,concurrency:1}),t=function(){i((function(e){return m.default({},e,{loading:!0})})),e.splice(0,e.length,(function(){return u.error?Promise.resolve():n.current.toBlob()}))};return n.current=I(),n.current.on("change",t),n.current.updateContainer(r),e.on("error",(function(e){console.error(e),i((function(r){return m.default({},r,{error:e})}))})),e.on("success",(function(e){i({blob:e,error:null,loading:!1,url:URL.createObjectURL(e)})})),function(){e.end(),n.current.removeListener("change",t)}}),[]),t.useEffect((function(){return function(){u.url&&URL.revokeObjectURL(u.url)}}),[u.url]);return[u,function(){n.current.updateContainer(r)}]},A=["title","style","className","children","innerRef","showToolbar"],V=function(e){var r=e.title,n=e.style,o=e.className,u=e.children,i=e.innerRef,a=e.showToolbar,c=void 0===a||a,l=k.default(e,A),f=M({document:u}),d=f[0],s=f[1];t.useEffect(s,[u]);var p=d.url?d.url+"#toolbar="+(c?1:0):null;return x.default.createElement("iframe",m.default({src:p,title:r,ref:i,style:n,className:o},l))},Y=function(e){var r=e.document,n=e.children,o=M({document:r}),u=o[0],i=o[1];return t.useEffect(i,[r]),r?n(u):(console.warn("You should pass a valid document to BlobProvider"),null)},z=function(e){var r=e.style,n=e.children,o=e.className,u=e.document,i=e.fileName,a=void 0===i?"document.pdf":i,c=M({document:u}),l=c[0],f=c[1];if(t.useEffect(f,[n]),!u)return console.warn("You should pass a valid document to PDFDownloadLink"),null;return x.default.createElement("a",{style:r,href:l.url,download:a,className:o,onClick:function(){window.navigator.msSaveBlob&&window.navigator.msSaveBlob(l.blob,a)}},"function"==typeof n?n(l):n)},H=function(e){throw new Error(e+" is a Node specific API. You're either using this method in a browser, or your bundler is not loading react-pdf from the appropriate web build.")},G=function(){H("renderToStream")},W=function(){H("renderToString")},X=function(){H("renderToFile")},J=function(){H("render")},K=m.default({pdf:I,usePDF:M,Font:U,version:"2.2.0",StyleSheet:_,PDFViewer:V,BlobProvider:Y,PDFDownloadLink:z,renderToStream:G,renderToString:W,renderToFile:X,render:J},y);exports.BlobProvider=Y,exports.Font=U,exports.PDFDownloadLink=z,exports.PDFViewer=V,exports.StyleSheet=_,exports.createRenderer=L,exports.default=K,exports.pdf=I,exports.render=J,exports.renderToFile=X,exports.renderToStream=G,exports.renderToString=W,exports.usePDF=M,exports.version="2.2.0",Object.keys(r).forEach((function(e){"default"===e||exports.hasOwnProperty(e)||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})}));
//# sourceMappingURL=react-pdf.browser.cjs.min.js.map
