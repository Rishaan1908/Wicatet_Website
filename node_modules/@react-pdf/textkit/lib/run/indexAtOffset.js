"use strict";

exports.__esModule = true;
exports.default = void 0;

/**
 * Get string index at offset
 *
 * @param  {Object}  run
 * @param  {number}  offset
 * @return {number} string index at offset N
 */
var indexAtOffset = function indexAtOffset(offset, run) {
  var counter = 0;
  var index = 0;
  var glyphs = run.glyphs || [];
  var positions = run.positions || [];

  for (var i = 0; i < positions.length; i += 1) {
    var _glyphs$i, _glyphs$i$codePoints;

    var xAdvance = positions[i].xAdvance;
    if (counter + xAdvance > offset) return index;
    counter += xAdvance;
    index += ((_glyphs$i = glyphs[i]) === null || _glyphs$i === void 0 ? void 0 : (_glyphs$i$codePoints = _glyphs$i.codePoints) === null || _glyphs$i$codePoints === void 0 ? void 0 : _glyphs$i$codePoints.length) || 0;
  }

  return index;
};

var _default = indexAtOffset;
exports.default = _default;